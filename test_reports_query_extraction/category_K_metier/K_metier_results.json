{
  "category": "K_metier",
  "timestamp": "2025-10-03T11:38:29.140919",
  "total_questions": 12,
  "api_successful": 12,
  "queries_found": 7,
  "success_rate": 58.333333333333336,
  "detailed_results": [
    {
      "question_id": "K001",
      "question": "Mes courses alimentaires de la semaine",
      "intent_detected": "transaction_search",
      "intent_confidence": 0.9,
      "entities_structured": {
        "categories": [
          "Alimentation",
          "Alimentation/Supermarché",
          "Supermarkets / Groceries"
        ],
        "date_range": "this_week",
        "transaction_type": "debit"
      },
      "entities_count": 3,
      "entity_confidence": 0.9333333333333332,
      "query_found": true,
      "query_data": {
        "user_id": 100,
        "filters": {
          "transaction_type": "debit",
          "date": {
            "gte": "2025-09-29",
            "lte": "2025-10-05"
          },
          "category_name": [
            "Alimentation",
            "Alimentation/Supermarché",
            "Supermarkets / Groceries"
          ]
        },
        "sort": [
          {
            "date": {
              "order": "desc"
            }
          }
        ],
        "page_size": 50,
        "aggregations": {
          "transaction_count": {
            "value_count": {
              "field": "transaction_id"
            }
          },
          "total_debit": {
            "filter": {
              "term": {
                "transaction_type": "debit"
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "alimentation_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "category_name.keyword": "Alimentation"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "alimentation/supermarché_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "category_name.keyword": "Alimentation/Supermarché"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "supermarkets_/_groceries_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "category_name.keyword": "Supermarkets / Groceries"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          }
        }
      },
      "query_size": 1155,
      "has_filters": true,
      "has_aggregations": true,
      "filter_count": 3,
      "aggregation_count": 5,
      "coherence_analysis": {
        "coherence_score": "HIGH",
        "issues": [],
        "details": {
          "entities_translated": "3/3"
        }
      },
      "latency_ms": 20933.72630001977,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "K002",
      "question": "Budget sorties du mois",
      "intent_detected": "financial_query",
      "intent_confidence": 0.85,
      "entities_structured": {
        "categories": [
          "Loisirs",
          "Restaurants/Sortie",
          "Movies & Cinema",
          "Concerts & Shows",
          "Gaming",
          "Sports Events"
        ],
        "date_range": "this_month",
        "transaction_type": "debit"
      },
      "entities_count": 3,
      "entity_confidence": 0.9333333333333332,
      "query_found": false,
      "query_data": null,
      "query_size": 0,
      "has_filters": false,
      "has_aggregations": false,
      "filter_count": 0,
      "aggregation_count": 0,
      "coherence_analysis": {
        "coherence_score": "LOW",
        "issues": [
          "Aucune query générée malgré intent et entités détectées"
        ],
        "details": {}
      },
      "latency_ms": 20238.248399924487,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "K003",
      "question": "Frais professionnels à rembourser",
      "intent_detected": "transaction_search",
      "intent_confidence": 0.8,
      "entities_structured": {
        "query": "frais professionnels rembourser",
        "transaction_type": "debit"
      },
      "entities_count": 2,
      "entity_confidence": 0.875,
      "query_found": true,
      "query_data": {
        "user_id": 100,
        "filters": {
          "transaction_type": "debit"
        },
        "sort": [
          {
            "date": {
              "order": "desc"
            }
          }
        ],
        "page_size": 50,
        "aggregations": {
          "transaction_count": {
            "value_count": {
              "field": "transaction_id"
            }
          },
          "total_debit": {
            "filter": {
              "term": {
                "transaction_type": "debit"
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          }
        }
      },
      "query_size": 325,
      "has_filters": true,
      "has_aggregations": true,
      "filter_count": 1,
      "aggregation_count": 2,
      "coherence_analysis": {
        "coherence_score": "MEDIUM",
        "issues": [
          "Entités manquantes dans query: query"
        ],
        "details": {
          "entities_translated": "1/2"
        }
      },
      "latency_ms": 36053.64799988456,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "K004",
      "question": "Dépenses vacances de juillet",
      "intent_detected": "transaction_search",
      "intent_confidence": 0.85,
      "entities_structured": {
        "categories": [
          "Voyage/Vacances"
        ],
        "date_range": "2025-07",
        "transaction_type": "debit"
      },
      "entities_count": 3,
      "entity_confidence": 0.9333333333333332,
      "query_found": true,
      "query_data": {
        "user_id": 100,
        "filters": {
          "transaction_type": "debit",
          "date": {
            "gte": "2025-07-01",
            "lte": "2025-07-31"
          },
          "category_name": [
            "Voyage/Vacances"
          ]
        },
        "sort": [
          {
            "date": {
              "order": "desc"
            }
          }
        ],
        "page_size": 50,
        "aggregations": {
          "transaction_count": {
            "value_count": {
              "field": "transaction_id"
            }
          },
          "total_debit": {
            "filter": {
              "term": {
                "transaction_type": "debit"
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "voyage/vacances_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "category_name.keyword": "Voyage/Vacances"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          }
        }
      },
      "query_size": 629,
      "has_filters": true,
      "has_aggregations": true,
      "filter_count": 3,
      "aggregation_count": 3,
      "coherence_analysis": {
        "coherence_score": "HIGH",
        "issues": [],
        "details": {
          "entities_translated": "3/3"
        }
      },
      "latency_ms": 20911.833399906754,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "K005",
      "question": "Mon ratio dépenses/revenus ce mois",
      "intent_detected": "financial_query",
      "intent_confidence": 0.85,
      "entities_structured": {
        "date_range": "this_month",
        "transaction_type": "all"
      },
      "entities_count": 2,
      "entity_confidence": 0.8500000000000001,
      "query_found": false,
      "query_data": null,
      "query_size": 0,
      "has_filters": false,
      "has_aggregations": false,
      "filter_count": 0,
      "aggregation_count": 0,
      "coherence_analysis": {
        "coherence_score": "LOW",
        "issues": [
          "Aucune query générée malgré intent et entités détectées"
        ],
        "details": {}
      },
      "latency_ms": 16693.59659985639,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "K006",
      "question": "Mes économies potentielles sur les abonnements",
      "intent_detected": "financial_query",
      "intent_confidence": 0.85,
      "entities_structured": {
        "categories": [
          "streaming",
          "Téléphones/internet",
          "Services",
          "Abonnements"
        ],
        "transaction_type": "debit"
      },
      "entities_count": 2,
      "entity_confidence": 0.9,
      "query_found": false,
      "query_data": null,
      "query_size": 0,
      "has_filters": false,
      "has_aggregations": false,
      "filter_count": 0,
      "aggregation_count": 0,
      "coherence_analysis": {
        "coherence_score": "LOW",
        "issues": [
          "Aucune query générée malgré intent et entités détectées"
        ],
        "details": {}
      },
      "latency_ms": 19636.917000170797,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "K007",
      "question": "Optimisation budget alimentaire",
      "intent_detected": "financial_query",
      "intent_confidence": 0.85,
      "entities_structured": {
        "categories": [
          "Alimentation",
          "Supermarkets / Groceries",
          "Restaurants",
          "Fast foods",
          "Coffee shop",
          "Food - Others"
        ],
        "transaction_type": "debit"
      },
      "entities_count": 2,
      "entity_confidence": 0.9,
      "query_found": false,
      "query_data": null,
      "query_size": 0,
      "has_filters": false,
      "has_aggregations": false,
      "filter_count": 0,
      "aggregation_count": 0,
      "coherence_analysis": {
        "coherence_score": "LOW",
        "issues": [
          "Aucune query générée malgré intent et entités détectées"
        ],
        "details": {}
      },
      "latency_ms": 22619.064399972558,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "K008",
      "question": "Suivi objectifs épargne",
      "intent_detected": "financial_query",
      "intent_confidence": 0.85,
      "entities_structured": {
        "transaction_type": "all"
      },
      "entities_count": 1,
      "entity_confidence": 0.8,
      "query_found": false,
      "query_data": null,
      "query_size": 0,
      "has_filters": false,
      "has_aggregations": false,
      "filter_count": 0,
      "aggregation_count": 0,
      "coherence_analysis": {
        "coherence_score": "LOW",
        "issues": [
          "Aucune query générée malgré intent et entités détectées"
        ],
        "details": {}
      },
      "latency_ms": 17975.15350021422,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "K009",
      "question": "Toutes mes factures d'énergie",
      "intent_detected": "transaction_search",
      "intent_confidence": 0.9,
      "entities_structured": {
        "categories": [
          "Electricity",
          "Water"
        ],
        "transaction_type": "debit"
      },
      "entities_count": 2,
      "entity_confidence": 0.95,
      "query_found": true,
      "query_data": {
        "user_id": 100,
        "filters": {
          "transaction_type": "debit",
          "category_name": [
            "Electricity",
            "Water"
          ]
        },
        "sort": [
          {
            "date": {
              "order": "desc"
            }
          }
        ],
        "page_size": 50,
        "aggregations": {
          "transaction_count": {
            "value_count": {
              "field": "transaction_id"
            }
          },
          "total_debit": {
            "filter": {
              "term": {
                "transaction_type": "debit"
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "electricity_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "category_name.keyword": "Electricity"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "water_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "category_name.keyword": "Water"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          }
        }
      },
      "query_size": 768,
      "has_filters": true,
      "has_aggregations": true,
      "filter_count": 2,
      "aggregation_count": 4,
      "coherence_analysis": {
        "coherence_score": "HIGH",
        "issues": [],
        "details": {
          "entities_translated": "2/2"
        }
      },
      "latency_ms": 20603.276999900118,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "K010",
      "question": "Mes remboursements de frais médicaux",
      "intent_detected": "transaction_search",
      "intent_confidence": 0.85,
      "entities_structured": {
        "categories": [
          "Santé/pharmacie",
          "Santé/Pharmacie"
        ],
        "transaction_type": "credit"
      },
      "entities_count": 2,
      "entity_confidence": 0.925,
      "query_found": true,
      "query_data": {
        "user_id": 100,
        "filters": {
          "transaction_type": "credit",
          "category_name": [
            "Santé/pharmacie",
            "Santé/Pharmacie"
          ]
        },
        "sort": [
          {
            "date": {
              "order": "desc"
            }
          }
        ],
        "page_size": 50,
        "aggregations": {
          "transaction_count": {
            "value_count": {
              "field": "transaction_id"
            }
          },
          "total_credit": {
            "filter": {
              "term": {
                "transaction_type": "credit"
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "santé/pharmacie_credit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "credit"
                    }
                  },
                  {
                    "term": {
                      "category_name.keyword": "Santé/Pharmacie"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          }
        }
      },
      "query_size": 621,
      "has_filters": true,
      "has_aggregations": true,
      "filter_count": 2,
      "aggregation_count": 3,
      "coherence_analysis": {
        "coherence_score": "HIGH",
        "issues": [],
        "details": {
          "entities_translated": "2/2"
        }
      },
      "latency_ms": 21505.01920003444,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "K011",
      "question": "Historique des virements reçus",
      "intent_detected": "transaction_search",
      "intent_confidence": 0.9,
      "entities_structured": {
        "operation_type": "transfer",
        "transaction_type": "credit"
      },
      "entities_count": 2,
      "entity_confidence": 0.95,
      "query_found": true,
      "query_data": {
        "user_id": 100,
        "filters": {
          "transaction_type": "credit"
        },
        "sort": [
          {
            "date": {
              "order": "desc"
            }
          }
        ],
        "page_size": 50,
        "aggregations": {
          "transaction_count": {
            "value_count": {
              "field": "transaction_id"
            }
          },
          "total_credit": {
            "filter": {
              "term": {
                "transaction_type": "credit"
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          }
        }
      },
      "query_size": 328,
      "has_filters": true,
      "has_aggregations": true,
      "filter_count": 1,
      "aggregation_count": 2,
      "coherence_analysis": {
        "coherence_score": "MEDIUM",
        "issues": [
          "Entités manquantes dans query: operation_type"
        ],
        "details": {
          "entities_translated": "1/2"
        }
      },
      "latency_ms": 29352.495800005272,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "K012",
      "question": "Dépenses déductibles fiscalement",
      "intent_detected": "transaction_search",
      "intent_confidence": 0.8,
      "entities_structured": {
        "query": "déductibles fiscalement impôts taxes",
        "transaction_type": "debit"
      },
      "entities_count": 2,
      "entity_confidence": 0.875,
      "query_found": true,
      "query_data": {
        "user_id": 100,
        "filters": {
          "transaction_type": "debit"
        },
        "sort": [
          {
            "date": {
              "order": "desc"
            }
          }
        ],
        "page_size": 50,
        "aggregations": {
          "transaction_count": {
            "value_count": {
              "field": "transaction_id"
            }
          },
          "total_debit": {
            "filter": {
              "term": {
                "transaction_type": "debit"
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          }
        }
      },
      "query_size": 325,
      "has_filters": true,
      "has_aggregations": true,
      "filter_count": 1,
      "aggregation_count": 2,
      "coherence_analysis": {
        "coherence_score": "MEDIUM",
        "issues": [
          "Entités manquantes dans query: query"
        ],
        "details": {
          "entities_translated": "1/2"
        }
      },
      "latency_ms": 28057.76089988649,
      "api_success": true,
      "error_message": null
    }
  ]
}