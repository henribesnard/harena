{
  "category": "M_robustesse",
  "timestamp": "2025-10-10T12:20:47.545107",
  "total_questions": 15,
  "api_successful": 15,
  "queries_found": 11,
  "success_rate": 73.33333333333333,
  "detailed_results": [
    {
      "question_id": "M001",
      "question": "Mes dÃ©penses en chinois: æˆ‘çš„ç½‘é£žæ”¯å‡º",
      "intent_detected": "CONVERSATIONAL",
      "intent_confidence": 0.7,
      "entities_structured": {},
      "entities_count": 0,
      "entity_confidence": 0.0,
      "query_found": false,
      "query_data": null,
      "query_size": 0,
      "has_filters": false,
      "has_aggregations": false,
      "filter_count": 0,
      "aggregation_count": 0,
      "coherence_analysis": {
        "coherence_score": "LOW",
        "issues": [
          "Aucune query gÃ©nÃ©rÃ©e malgrÃ© intent et entitÃ©s dÃ©tectÃ©es"
        ],
        "details": {}
      },
      "latency_ms": 12762.82549998723,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "M002",
      "question": "Mes achats with English words mixed",
      "intent_detected": "CONVERSATIONAL",
      "intent_confidence": 0.7,
      "entities_structured": {
        "categories": [
          "Carburant",
          "Transport",
          "Loisirs",
          "Entretien maison",
          "achats en ligne",
          "Alimentation",
          "VÃªtements"
        ]
      },
      "entities_count": 1,
      "entity_confidence": 0.9,
      "query_found": false,
      "query_data": null,
      "query_size": 0,
      "has_filters": false,
      "has_aggregations": false,
      "filter_count": 0,
      "aggregation_count": 0,
      "coherence_analysis": {
        "coherence_score": "LOW",
        "issues": [
          "Aucune query gÃ©nÃ©rÃ©e malgrÃ© intent et entitÃ©s dÃ©tectÃ©es"
        ],
        "details": {}
      },
      "latency_ms": 11976.51560002123,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "M003",
      "question": "Mes dÃ©penses avec des â‚¬m0jis ðŸ’°ðŸ›’",
      "intent_detected": "transaction_search",
      "intent_confidence": 0.85,
      "entities_structured": {
        "transaction_type": "debit"
      },
      "entities_count": 1,
      "entity_confidence": 0.95,
      "query_found": true,
      "query_data": {
        "user_id": 100,
        "filters": {
          "transaction_type": "debit"
        },
        "sort": [
          {
            "date": {
              "order": "desc"
            }
          }
        ],
        "page_size": 50,
        "aggregations": {
          "transaction_count": {
            "value_count": {
              "field": "transaction_id"
            }
          },
          "total_debit": {
            "filter": {
              "term": {
                "transaction_type": "debit"
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          }
        }
      },
      "query_size": 325,
      "has_filters": true,
      "has_aggregations": true,
      "filter_count": 1,
      "aggregation_count": 2,
      "coherence_analysis": {
        "coherence_score": "HIGH",
        "issues": [],
        "details": {
          "entities_translated": "1/1"
        }
      },
      "latency_ms": 17714.96159999515,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "M004",
      "question": "MES DÃ‰PENSES EN MAJUSCULES NETFLIX",
      "intent_detected": "transaction_search",
      "intent_confidence": 0.95,
      "entities_structured": {
        "merchant": "Netflix",
        "transaction_type": "debit"
      },
      "entities_count": 2,
      "entity_confidence": 0.965,
      "query_found": true,
      "query_data": {
        "user_id": 100,
        "filters": {
          "merchant_name": "Netflix",
          "transaction_type": "debit"
        },
        "sort": [
          {
            "date": {
              "order": "desc"
            }
          }
        ],
        "page_size": 50,
        "aggregations": {
          "transaction_count": {
            "value_count": {
              "field": "transaction_id"
            }
          },
          "total_debit": {
            "filter": {
              "term": {
                "transaction_type": "debit"
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "netflix_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "merchant_name.keyword": "Netflix"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          }
        }
      },
      "query_size": 551,
      "has_filters": true,
      "has_aggregations": true,
      "filter_count": 2,
      "aggregation_count": 3,
      "coherence_analysis": {
        "coherence_score": "HIGH",
        "issues": [],
        "details": {
          "entities_translated": "2/2"
        }
      },
      "latency_ms": 21608.504500007257,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "M005",
      "question": "mes dÃ©penses en minuscules amazon",
      "intent_detected": "transaction_search",
      "intent_confidence": 0.9,
      "entities_structured": {
        "merchant": "Amazon",
        "transaction_type": "debit"
      },
      "entities_count": 2,
      "entity_confidence": 0.95,
      "query_found": true,
      "query_data": {
        "user_id": 100,
        "filters": {
          "merchant_name": "Amazon",
          "transaction_type": "debit"
        },
        "sort": [
          {
            "date": {
              "order": "desc"
            }
          }
        ],
        "page_size": 50,
        "aggregations": {
          "transaction_count": {
            "value_count": {
              "field": "transaction_id"
            }
          },
          "total_debit": {
            "filter": {
              "term": {
                "transaction_type": "debit"
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "amazon_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "merchant_name.keyword": "Amazon"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          }
        }
      },
      "query_size": 548,
      "has_filters": true,
      "has_aggregations": true,
      "filter_count": 2,
      "aggregation_count": 3,
      "coherence_analysis": {
        "coherence_score": "HIGH",
        "issues": [],
        "details": {
          "entities_translated": "2/2"
        }
      },
      "latency_ms": 21083.200499997474,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "M006",
      "question": "(question avec des espaces multiples)    Mes dÃ©penses    Netflix",
      "intent_detected": "transaction_search",
      "intent_confidence": 0.9,
      "entities_structured": {
        "merchant": "Netflix",
        "transaction_type": "debit"
      },
      "entities_count": 2,
      "entity_confidence": 0.95,
      "query_found": true,
      "query_data": {
        "user_id": 100,
        "filters": {
          "merchant_name": "Netflix",
          "transaction_type": "debit"
        },
        "sort": [
          {
            "date": {
              "order": "desc"
            }
          }
        ],
        "page_size": 50,
        "aggregations": {
          "transaction_count": {
            "value_count": {
              "field": "transaction_id"
            }
          },
          "total_debit": {
            "filter": {
              "term": {
                "transaction_type": "debit"
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "netflix_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "merchant_name.keyword": "Netflix"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          }
        }
      },
      "query_size": 551,
      "has_filters": true,
      "has_aggregations": true,
      "filter_count": 2,
      "aggregation_count": 3,
      "coherence_analysis": {
        "coherence_score": "HIGH",
        "issues": [],
        "details": {
          "entities_translated": "2/2"
        }
      },
      "latency_ms": 20495.7393000077,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "M007",
      "question": "Mes dÃ©penses Netflix?????",
      "intent_detected": "transaction_search",
      "intent_confidence": 0.95,
      "entities_structured": {
        "merchant": "Netflix",
        "transaction_type": "debit"
      },
      "entities_count": 2,
      "entity_confidence": 0.965,
      "query_found": true,
      "query_data": {
        "user_id": 100,
        "filters": {
          "merchant_name": "Netflix",
          "transaction_type": "debit"
        },
        "sort": [
          {
            "date": {
              "order": "desc"
            }
          }
        ],
        "page_size": 50,
        "aggregations": {
          "transaction_count": {
            "value_count": {
              "field": "transaction_id"
            }
          },
          "total_debit": {
            "filter": {
              "term": {
                "transaction_type": "debit"
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "netflix_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "merchant_name.keyword": "Netflix"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          }
        }
      },
      "query_size": 551,
      "has_filters": true,
      "has_aggregations": true,
      "filter_count": 2,
      "aggregation_count": 3,
      "coherence_analysis": {
        "coherence_score": "HIGH",
        "issues": [],
        "details": {
          "entities_translated": "2/2"
        }
      },
      "latency_ms": 20895.417299994733,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "M008",
      "question": "!!!! Mes achats Amazon !!!!",
      "intent_detected": "transaction_search",
      "intent_confidence": 0.95,
      "entities_structured": {
        "merchant": "Amazon",
        "transaction_type": "debit"
      },
      "entities_count": 2,
      "entity_confidence": 0.965,
      "query_found": true,
      "query_data": {
        "user_id": 100,
        "filters": {
          "merchant_name": "Amazon",
          "transaction_type": "debit"
        },
        "sort": [
          {
            "date": {
              "order": "desc"
            }
          }
        ],
        "page_size": 50,
        "aggregations": {
          "transaction_count": {
            "value_count": {
              "field": "transaction_id"
            }
          },
          "total_debit": {
            "filter": {
              "term": {
                "transaction_type": "debit"
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "amazon_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "merchant_name.keyword": "Amazon"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          }
        }
      },
      "query_size": 548,
      "has_filters": true,
      "has_aggregations": true,
      "filter_count": 2,
      "aggregation_count": 3,
      "coherence_analysis": {
        "coherence_score": "HIGH",
        "issues": [],
        "details": {
          "entities_translated": "2/2"
        }
      },
      "latency_ms": 20373.608900001273,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "M009",
      "question": "mes...dÃ©penses...points...de...suspension",
      "intent_detected": "CONVERSATIONAL",
      "intent_confidence": 0.7,
      "entities_structured": {},
      "entities_count": 0,
      "entity_confidence": 0.0,
      "query_found": false,
      "query_data": null,
      "query_size": 0,
      "has_filters": false,
      "has_aggregations": false,
      "filter_count": 0,
      "aggregation_count": 0,
      "coherence_analysis": {
        "coherence_score": "LOW",
        "issues": [
          "Aucune query gÃ©nÃ©rÃ©e malgrÃ© intent et entitÃ©s dÃ©tectÃ©es"
        ],
        "details": {}
      },
      "latency_ms": 12895.614900015062,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "M010",
      "question": "Mes/dÃ©penses/slashes/Amazon",
      "intent_detected": "transaction_search",
      "intent_confidence": 0.9,
      "entities_structured": {
        "merchant": "Amazon",
        "transaction_type": "debit"
      },
      "entities_count": 2,
      "entity_confidence": 0.95,
      "query_found": true,
      "query_data": {
        "user_id": 100,
        "filters": {
          "merchant_name": "Amazon",
          "transaction_type": "debit"
        },
        "sort": [
          {
            "date": {
              "order": "desc"
            }
          }
        ],
        "page_size": 50,
        "aggregations": {
          "transaction_count": {
            "value_count": {
              "field": "transaction_id"
            }
          },
          "total_debit": {
            "filter": {
              "term": {
                "transaction_type": "debit"
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "amazon_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "merchant_name.keyword": "Amazon"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          }
        }
      },
      "query_size": 548,
      "has_filters": true,
      "has_aggregations": true,
      "filter_count": 2,
      "aggregation_count": 3,
      "coherence_analysis": {
        "coherence_score": "HIGH",
        "issues": [],
        "details": {
          "entities_translated": "2/2"
        }
      },
      "latency_ms": 20465.056999993976,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "M011",
      "question": "Mes dÃ©penses et mes revenus et mes virements et mes prÃ©lÃ¨vements",
      "intent_detected": "transaction_search",
      "intent_confidence": 0.85,
      "entities_structured": {
        "transaction_type": "all",
        "operation_type": "direct_debit"
      },
      "entities_count": 3,
      "entity_confidence": 0.8333333333333334,
      "query_found": true,
      "query_data": {
        "user_id": 100,
        "sort": [
          {
            "date": {
              "order": "desc"
            }
          }
        ],
        "page_size": 50,
        "aggregations": {
          "transaction_count": {
            "value_count": {
              "field": "transaction_id"
            }
          },
          "total_debit": {
            "filter": {
              "term": {
                "transaction_type": "debit"
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "total_credit": {
            "filter": {
              "term": {
                "transaction_type": "credit"
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          }
        }
      },
      "query_size": 411,
      "has_filters": false,
      "has_aggregations": true,
      "filter_count": 0,
      "aggregation_count": 3,
      "coherence_analysis": {
        "coherence_score": "LOW",
        "issues": [
          "EntitÃ©s manquantes dans query: operation_type",
          "Intent transaction_search mais aucun filtre dans query"
        ],
        "details": {
          "entities_translated": "1/2"
        }
      },
      "latency_ms": 22127.6654000103,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "M012",
      "question": "Combien j'ai dÃ©pensÃ© chez Amazon versus Netflix versus Carrefour",
      "intent_detected": "transaction_search",
      "intent_confidence": 0.95,
      "entities_structured": {
        "merchants": [
          "Amazon",
          "Netflix",
          "Carrefour"
        ],
        "transaction_type": "debit"
      },
      "entities_count": 2,
      "entity_confidence": 0.95,
      "query_found": true,
      "query_data": {
        "user_id": 100,
        "filters": {
          "merchant_name": [
            "Amazon",
            "Netflix",
            "Carrefour"
          ],
          "transaction_type": "debit"
        },
        "sort": [
          {
            "date": {
              "order": "desc"
            }
          }
        ],
        "page_size": 50,
        "aggregations": {
          "transaction_count": {
            "value_count": {
              "field": "transaction_id"
            }
          },
          "total_debit": {
            "filter": {
              "term": {
                "transaction_type": "debit"
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "amazon_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "merchant_name.keyword": "Amazon"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "netflix_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "merchant_name.keyword": "Netflix"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "carrefour_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "merchant_name.keyword": "Carrefour"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          }
        }
      },
      "query_size": 974,
      "has_filters": true,
      "has_aggregations": true,
      "filter_count": 2,
      "aggregation_count": 5,
      "coherence_analysis": {
        "coherence_score": "MEDIUM",
        "issues": [
          "EntitÃ©s manquantes dans query: merchants"
        ],
        "details": {
          "entities_translated": "1/2"
        }
      },
      "latency_ms": 19398.05190000334,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "M013",
      "question": "Toutes mes transactions du 1er janvier au 31 dÃ©cembre avec catÃ©gories",
      "intent_detected": "transaction_search",
      "intent_confidence": 0.95,
      "entities_structured": {
        "date_range": "2025-01-01_2025-12-31",
        "transaction_type": "all"
      },
      "entities_count": 2,
      "entity_confidence": 0.925,
      "query_found": true,
      "query_data": {
        "user_id": 100,
        "filters": {
          "date": {
            "gte": "2025-01-01",
            "lte": "2025-12-31"
          }
        },
        "sort": [
          {
            "date": {
              "order": "desc"
            }
          }
        ],
        "page_size": 50,
        "aggregations": {
          "transaction_count": {
            "value_count": {
              "field": "transaction_id"
            }
          },
          "total_debit": {
            "filter": {
              "term": {
                "transaction_type": "debit"
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "total_credit": {
            "filter": {
              "term": {
                "transaction_type": "credit"
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_debit_2025_01": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-01-01",
                        "lte": "2025-01-31"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_credit_2025_01": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "credit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-01-01",
                        "lte": "2025-01-31"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_debit_2025_02": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-02-01",
                        "lte": "2025-02-28"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_credit_2025_02": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "credit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-02-01",
                        "lte": "2025-02-28"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_debit_2025_03": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-03-01",
                        "lte": "2025-03-31"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_credit_2025_03": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "credit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-03-01",
                        "lte": "2025-03-31"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_debit_2025_04": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-04-01",
                        "lte": "2025-04-30"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_credit_2025_04": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "credit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-04-01",
                        "lte": "2025-04-30"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_debit_2025_05": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-05-01",
                        "lte": "2025-05-31"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_credit_2025_05": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "credit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-05-01",
                        "lte": "2025-05-31"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_debit_2025_06": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-06-01",
                        "lte": "2025-06-30"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_credit_2025_06": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "credit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-06-01",
                        "lte": "2025-06-30"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_debit_2025_07": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-07-01",
                        "lte": "2025-07-31"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_credit_2025_07": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "credit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-07-01",
                        "lte": "2025-07-31"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_debit_2025_08": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-08-01",
                        "lte": "2025-08-31"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_credit_2025_08": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "credit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-08-01",
                        "lte": "2025-08-31"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_debit_2025_09": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-09-01",
                        "lte": "2025-09-30"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_credit_2025_09": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "credit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-09-01",
                        "lte": "2025-09-30"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_debit_2025_10": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-10-01",
                        "lte": "2025-10-31"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_credit_2025_10": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "credit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-10-01",
                        "lte": "2025-10-31"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_debit_2025_11": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-11-01",
                        "lte": "2025-11-30"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_credit_2025_11": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "credit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-11-01",
                        "lte": "2025-11-30"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_debit_2025_12": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-12-01",
                        "lte": "2025-12-31"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "monthly_credit_2025_12": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "credit"
                    }
                  },
                  {
                    "range": {
                      "date": {
                        "gte": "2025-12-01",
                        "lte": "2025-12-31"
                      }
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          }
        }
      },
      "query_size": 5852,
      "has_filters": true,
      "has_aggregations": true,
      "filter_count": 1,
      "aggregation_count": 27,
      "coherence_analysis": {
        "coherence_score": "HIGH",
        "issues": [],
        "details": {
          "entities_translated": "2/2"
        }
      },
      "latency_ms": 23680.96590001369,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "M014",
      "question": "Mes achats de plus de 100 euros ou de moins de 10 euros en juin",
      "intent_detected": "transaction_search",
      "intent_confidence": 0.9,
      "entities_structured": {
        "amount": 10,
        "operator": "lt",
        "date_range": "2025-06",
        "transaction_type": "debit",
        "categories": [
          "Carburant",
          "Transport",
          "Loisirs",
          "Entretien maison",
          "achats en ligne",
          "Alimentation",
          "VÃªtements"
        ]
      },
      "entities_count": 7,
      "entity_confidence": 0.9285714285714286,
      "query_found": true,
      "query_data": {
        "user_id": 100,
        "filters": {
          "transaction_type": "debit",
          "category_name": [
            "Carburant",
            "Transport",
            "Loisirs",
            "Entretien maison",
            "achats en ligne",
            "Alimentation",
            "VÃªtements"
          ],
          "amount_abs": {
            "lt": 10
          },
          "date": {
            "gte": "2025-06-01",
            "lte": "2025-06-30"
          }
        },
        "sort": [
          {
            "date": {
              "order": "desc"
            }
          }
        ],
        "page_size": 50,
        "aggregations": {
          "transaction_count": {
            "value_count": {
              "field": "transaction_id"
            }
          },
          "total_debit": {
            "filter": {
              "term": {
                "transaction_type": "debit"
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "carburant_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "category_name.keyword": "Carburant"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "transport_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "category_name.keyword": "Transport"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "loisirs_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "category_name.keyword": "Loisirs"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "entretien_maison_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "category_name.keyword": "Entretien maison"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "achats_en_ligne_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "category_name.keyword": "achats en ligne"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "alimentation_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "category_name.keyword": "Alimentation"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          },
          "vÃªtements_debit": {
            "filter": {
              "bool": {
                "must": [
                  {
                    "term": {
                      "transaction_type": "debit"
                    }
                  },
                  {
                    "term": {
                      "category_name.keyword": "VÃªtements"
                    }
                  }
                ]
              }
            },
            "aggs": {
              "sum_amount": {
                "sum": {
                  "field": "amount_abs"
                }
              }
            }
          }
        }
      },
      "query_size": 1984,
      "has_filters": true,
      "has_aggregations": true,
      "filter_count": 4,
      "aggregation_count": 9,
      "coherence_analysis": {
        "coherence_score": "HIGH",
        "issues": [],
        "details": {
          "entities_translated": "5/5"
        }
      },
      "latency_ms": 30399.158599990187,
      "api_success": true,
      "error_message": null
    },
    {
      "question_id": "M015",
      "question": "Analyse prÃ©dictive de mes dÃ©penses pour les 6 prochains mois",
      "intent_detected": "financial_query",
      "intent_confidence": 0.85,
      "entities_structured": {
        "transaction_type": "debit",
        "date_range": "next_6_months"
      },
      "entities_count": 2,
      "entity_confidence": 0.8500000000000001,
      "query_found": false,
      "query_data": null,
      "query_size": 0,
      "has_filters": false,
      "has_aggregations": false,
      "filter_count": 0,
      "aggregation_count": 0,
      "coherence_analysis": {
        "coherence_score": "LOW",
        "issues": [
          "Aucune query gÃ©nÃ©rÃ©e malgrÃ© intent et entitÃ©s dÃ©tectÃ©es"
        ],
        "details": {}
      },
      "latency_ms": 19459.044000017457,
      "api_success": true,
      "error_message": null
    }
  ]
}