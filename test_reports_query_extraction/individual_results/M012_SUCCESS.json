{
  "question_id": "M012",
  "category": "M_robustesse",
  "question": "Combien j'ai dépensé chez Amazon versus Netflix versus Carrefour",
  "intent_detected": "transaction_search",
  "intent_confidence": 0.95,
  "entities_structured": {
    "merchants": [
      "Amazon",
      "Netflix",
      "Carrefour"
    ],
    "transaction_type": "debit"
  },
  "entities_count": 2,
  "entity_confidence": 0.95,
  "query_found": true,
  "query_data": {
    "user_id": 100,
    "filters": {
      "merchant_name": [
        "Amazon",
        "Netflix",
        "Carrefour"
      ],
      "transaction_type": "debit"
    },
    "sort": [
      {
        "date": {
          "order": "desc"
        }
      }
    ],
    "page_size": 50,
    "aggregations": {
      "transaction_count": {
        "value_count": {
          "field": "transaction_id"
        }
      },
      "total_debit": {
        "filter": {
          "term": {
            "transaction_type": "debit"
          }
        },
        "aggs": {
          "sum_amount": {
            "sum": {
              "field": "amount_abs"
            }
          }
        }
      },
      "amazon_debit": {
        "filter": {
          "bool": {
            "must": [
              {
                "term": {
                  "transaction_type": "debit"
                }
              },
              {
                "term": {
                  "merchant_name.keyword": "Amazon"
                }
              }
            ]
          }
        },
        "aggs": {
          "sum_amount": {
            "sum": {
              "field": "amount_abs"
            }
          }
        }
      },
      "netflix_debit": {
        "filter": {
          "bool": {
            "must": [
              {
                "term": {
                  "transaction_type": "debit"
                }
              },
              {
                "term": {
                  "merchant_name.keyword": "Netflix"
                }
              }
            ]
          }
        },
        "aggs": {
          "sum_amount": {
            "sum": {
              "field": "amount_abs"
            }
          }
        }
      },
      "carrefour_debit": {
        "filter": {
          "bool": {
            "must": [
              {
                "term": {
                  "transaction_type": "debit"
                }
              },
              {
                "term": {
                  "merchant_name.keyword": "Carrefour"
                }
              }
            ]
          }
        },
        "aggs": {
          "sum_amount": {
            "sum": {
              "field": "amount_abs"
            }
          }
        }
      }
    }
  },
  "query_size": 974,
  "has_filters": true,
  "has_aggregations": true,
  "filter_count": 2,
  "aggregation_count": 5,
  "coherence_analysis": {
    "coherence_score": "MEDIUM",
    "issues": [
      "Entités manquantes dans query: merchants"
    ],
    "details": {
      "entities_translated": "1/2"
    }
  },
  "latency_ms": 19398.05190000334,
  "api_success": true,
  "error_message": null,
  "timestamp": "2025-10-10T12:19:31.987891"
}